<html>
  <head>
    <title>YouTubeCast Video Server</title>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, Helvetica, sans-serif;
        font-size: larger;
      }

      #container {
        align-items: center;
        display: flex;
        flex-direction: column;
        gap: 10px;
        margin: 20px;
        width: 100%;
      }

      button {
        padding: 5px;
      }
    </style>
  </head>
  <body>
    <div id="container">
      <h2>YouTubeCast Video Server</h2>
      <span id="currentDownload"></span>
      <span id="queueSize"></span>
      <button id="disableButton">Temporarily Disable Video Server</button>
      <span id="responseContainer"></span>
    </div>
    <script>
      const disableButton = document.getElementById('disableButton');
      const responseContainer = document.getElementById('responseContainer');
      disableButton.onclick = () =>
        fetch('/disable', { method: 'POST' })
          .then((response) => response.text())
          .then((responseText) => (responseContainer.innerText = responseText))
          .catch(() => (responseContainer.innerText = 'Failed to diable video server'));

      const queueSize = document.getElementById('queueSize');
      fetch('/queue')
        .then((response) => response.json())
        .then(
          (data) =>
            (queueSize.innerText = `Download queue - ${data.length > 0 ? data.length : 'No'} video${
              data.length === 1 ? '' : 's'
            }`)
        )
        .catch(() => (queueSize.innerText = 'Could not get download queue size'));

      const currentDownload = document.getElementById('currentDownload');
      fetch('/currentDownload')
        .then((response) => response.text())
        .then(
          (responseText) =>
            (currentDownload.innerText = `Current download - ${responseText ? responseText : 'None'}`)
        )
        .catch(() => (queueSize.innerText = 'Could not get current download'));
    </script>
  </body>
</html>
